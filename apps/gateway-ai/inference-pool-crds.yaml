apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    api-approved.kubernetes.io: https://github.com/kubernetes-sigs/gateway-api-inference-extension/pull/1173
    inference.networking.k8s.io/bundle-version: v1.2.0-rc.1
  name: inferencepools.inference.networking.k8s.io
spec:
  group: inference.networking.k8s.io
  names:
    kind: InferencePool
    listKind: InferencePoolList
    plural: inferencepools
    shortNames:
      - infpool
    singular: inferencepool
  scope: Namespaced
  versions:
    - name: v1
      schema:
        openAPIV3Schema:
          description: |
            InferencePool is the Schema for the InferencePools API.
          properties:
            apiVersion:
              type: string
            kind:
              type: string
            metadata:
              type: object
            spec:
              properties:
                endpointPickerRef:
                  properties:
                    failureMode:
                      default: FailClose
                      enum:
                        - FailOpen
                        - FailClose
                      type: string
                    group:
                      default: ""
                      maxLength: 253
                      minLength: 0
                      pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    kind:
                      default: Service
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                      type: string
                    name:
                      maxLength: 253
                      minLength: 1
                      type: string
                    port:
                      properties:
                        number:
                          format: int32
                          maximum: 65535
                          minimum: 1
                          type: integer
                      required:
                        - number
                      type: object
                  required:
                    - name
                  type: object
                  x-kubernetes-validations:
                    - message: port is required when kind is 'Service' or unspecified (defaults to 'Service')
                      rule: self.kind != 'Service' || has(self.port)
                selector:
                  properties:
                    matchLabels:
                      additionalProperties:
                        maxLength: 63
                        minLength: 0
                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                        type: string
                      maxProperties: 64
                      minProperties: 1
                      type: object
                  required:
                    - matchLabels
                  type: object
                targetPorts:
                  items:
                    properties:
                      number:
                        format: int32
                        maximum: 65535
                        minimum: 1
                        type: integer
                    required:
                      - number
                    type: object
                  maxItems: 8
                  minItems: 1
                  type: array
                  x-kubernetes-list-type: atomic
                  x-kubernetes-validations:
                    - message: port number must be unique
                      rule: self.all(p1, self.exists_one(p2, p1.number==p2.number))
              required:
                - endpointPickerRef
                - selector
                - targetPorts
              type: object
            status:
              properties:
                parents:
                  items:
                    properties:
                      conditions:
                        items:
                          properties:
                            lastTransitionTime:
                              format: date-time
                              type: string
                            message:
                              maxLength: 32768
                              type: string
                            observedGeneration:
                              format: int64
                              minimum: 0
                              type: integer
                            reason:
                              maxLength: 1024
                              minLength: 1
                              pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                              type: string
                            status:
                              enum:
                                - "True"
                                - "False"
                                - Unknown
                              type: string
                            type:
                              maxLength: 316
                              pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                              type: string
                          required:
                            - lastTransitionTime
                            - message
                            - reason
                            - status
                            - type
                          type: object
                        maxItems: 8
                        type: array
                        x-kubernetes-list-map-keys:
                          - type
                        x-kubernetes-list-type: map
                      controllerName:
                        maxLength: 253
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                        type: string
                      parentRef:
                        properties:
                          group:
                            default: gateway.networking.k8s.io
                            maxLength: 253
                            minLength: 0
                            pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                            type: string
                          kind:
                            default: Gateway
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                            type: string
                          name:
                            maxLength: 253
                            minLength: 1
                            type: string
                          namespace:
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                        required:
                          - name
                        type: object
                    required:
                      - parentRef
                    type: object
                  maxItems: 32
                  type: array
                  x-kubernetes-list-type: atomic
              type: object
          required:
            - spec
          type: object
      served: true
      storage: true
      subresources:
        status: {}
